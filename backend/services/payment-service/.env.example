# ============================================
# Payment Service Environment Variables
# ============================================

# Server Configuration
NODE_ENV=development
PORT=3004

# Database
DATABASE_URL=postgresql://mnbara_user:mnbara_pass@postgres:5432/mnbara_db

# Redis Cache
REDIS_URL=redis://redis:6379

# ============================================
# STRIPE CONFIGURATION
# ============================================
# Get your keys from: https://dashboard.stripe.com/test/apikeys

# Stripe Secret Key (starts with sk_test_...)
STRIPE_SECRET_KEY=your_stripe_secret_key_here

# Stripe Publishable Key (starts with pk_test_...)
# Used on frontend for client-side operations
STRIPE_PUBLISHABLE_KEY=pk_test_51ABC123DEF456GHI789JKL012MNO345PQR678STU901VWX234YZA567BCD890EFG123HIJ456KLM789NOP012QRS345TUV678

# Stripe Webhook Secret (starts with whsec_...)
# Get from: https://dashboard.stripe.com/test/webhooks
STRIPE_WEBHOOK_SECRET=whsec_1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890

# Stripe API Version (use latest stable)
STRIPE_API_VERSION=2023-10-16

# ============================================
# PAYPAL CONFIGURATION
# ============================================
# Get from: https://developer.paypal.com/dashboard/

PAYPAL_CLIENT_ID=YOUR_PAYPAL_CLIENT_ID_HERE
PAYPAL_SECRET=YOUR_PAYPAL_SECRET_HERE
PAYPAL_MODE=sandbox  # sandbox | live
PAYPAL_WEBHOOK_ID=YOUR_PAYPAL_WEBHOOK_ID_HERE

# ============================================
# PAYMOB CONFIGURATION (MENA Region)
# ============================================
# Get from: https://accept.paymob.com/portal2/en/settings

# API Key from Paymob dashboard
PAYMOB_API_KEY=YOUR_PAYMOB_API_KEY_HERE

# Integration ID for card payments
PAYMOB_INTEGRATION_ID=YOUR_PAYMOB_INTEGRATION_ID_HERE

# Integration ID for mobile wallet payments (Vodafone Cash, Orange Money, etc.)
PAYMOB_WALLET_INTEGRATION_ID=YOUR_PAYMOB_WALLET_INTEGRATION_ID_HERE

# iFrame ID for card payment form
PAYMOB_IFRAME_ID=YOUR_PAYMOB_IFRAME_ID_HERE

# HMAC Secret for webhook verification
PAYMOB_HMAC_SECRET=YOUR_PAYMOB_HMAC_SECRET_HERE

# ============================================
# PAYMENT SETTINGS
# ============================================

# Default Currency
DEFAULT_CURRENCY=USD

# Platform Commission Rate (e.g., 0.15 = 15%)
PLATFORM_COMMISSION_RATE=0.15

# Minimum Payout Amount (in cents)
MIN_PAYOUT_AMOUNT=1000  # $10.00

# Maximum Transaction Amount (in cents)
MAX_TRANSACTION_AMOUNT=100000000  # $1,000,000.00

# ============================================
# ESCROW SETTINGS
# ============================================

# Auto-release escrow after delivery confirmation (in days)
ESCROW_AUTO_RELEASE_DAYS=3

# Escrow hold period for disputes (in days)
ESCROW_DISPUTE_PERIOD=7

# ============================================
# SECURITY
# ============================================

# JWT Secret for payment service authentication
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-min-32-chars

# Encryption key for sensitive data (32 bytes hex)
ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# ============================================
# WEBHOOKS & NOTIFICATIONS
# ============================================

# Internal service URLs
NOTIFICATION_SERVICE_URL=http://notification-service:3006
ORDER_SERVICE_URL=http://orders-service:3009
USER_SERVICE_URL=http://auth-service:3001

# External webhook URL (for Stripe callbacks)
# Should be your public domain in production
WEBHOOK_BASE_URL=https://api.mnbara.com

# ============================================
# RABBITMQ (Event Publishing)
# ============================================

# RabbitMQ connection URL
RABBITMQ_URL=amqp://guest:guest@localhost:5672

# Exchange name for payment events
RABBITMQ_EXCHANGE=mnbara.payments

# ============================================
# LOGGING & MONITORING
# ============================================

# Log Level: error, warn, info, debug
LOG_LEVEL=debug

# Enable transaction logging
ENABLE_TRANSACTION_LOGS=true

# Sentry DSN (optional - for error tracking)
SENTRY_DSN=

# ============================================
# TESTING
# ============================================

# Stripe Test Cards (DO NOT USE IN PRODUCTION)
# Success: 4242 4242 4242 4242
# Decline: 4000 0000 0000 0002
# 3D Secure: 4000 0025 0000 3155

# Enable test mode
TEST_MODE=true
